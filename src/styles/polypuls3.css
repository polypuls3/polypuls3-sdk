@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Primary color - Polypuls3 purple */
    --polypuls3-primary: #8247e5;
    --polypuls3-primary-foreground: #ffffff;
    --polypuls3-primary-light: #a78bfa;
    --polypuls3-primary-dark: #6d28d9;

    /* Secondary color */
    --polypuls3-secondary: #64748b;
    --polypuls3-secondary-foreground: #ffffff;

    /* Semantic colors */
    --polypuls3-success: #22c55e;
    --polypuls3-success-foreground: #ffffff;
    --polypuls3-success-light: #4ade80;
    --polypuls3-error: #ef4444;
    --polypuls3-error-foreground: #ffffff;

    /* Background and foreground */
    --polypuls3-background: #ffffff;
    --polypuls3-foreground: #0f172a;

    /* Border and muted */
    --polypuls3-border: #e2e8f0;
    --polypuls3-muted: #f1f5f9;
    --polypuls3-muted-foreground: #64748b;

    /* Border radius - can be overridden */
    --polypuls3-radius: 0.5rem;

    /* Spacing multiplier - can be overridden */
    --polypuls3-spacing: 1;

    /* Shadow levels - overridden by theme preset */
    --polypuls3-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --polypuls3-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --polypuls3-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --polypuls3-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --polypuls3-shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
  }

  .polypuls3-dark {
    --polypuls3-primary: #a78bfa;
    --polypuls3-primary-foreground: #1e1b4b;
    --polypuls3-primary-light: #c4b5fd;
    --polypuls3-primary-dark: #8b5cf6;

    --polypuls3-secondary: #475569;
    --polypuls3-secondary-foreground: #f1f5f9;

    --polypuls3-success: #4ade80;
    --polypuls3-success-foreground: #14532d;
    --polypuls3-success-light: #86efac;
    --polypuls3-error: #f87171;
    --polypuls3-error-foreground: #7f1d1d;

    --polypuls3-background: #0f172a;
    --polypuls3-foreground: #f1f5f9;

    --polypuls3-border: #334155;
    --polypuls3-muted: #1e293b;
    --polypuls3-muted-foreground: #94a3b8;

    --polypuls3-shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.2);
    --polypuls3-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.3), 0 1px 2px -1px rgb(0 0 0 / 0.3);
    --polypuls3-shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.3), 0 2px 4px -2px rgb(0 0 0 / 0.3);
    --polypuls3-shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
    --polypuls3-shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.3), 0 8px 10px -6px rgb(0 0 0 / 0.3);
  }

  /* Animation keyframes */
  @keyframes polypuls3-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.8;
    }
  }

  @keyframes polypuls3-shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  @keyframes polypuls3-slide-in {
    from {
      transform: translateY(-10px);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes polypuls3-scale-in {
    from {
      transform: scale(0.95);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
}

@layer components {
  /* Base component styles */
  .polypuls3-button {
    @apply pp-inline-flex pp-items-center pp-justify-center pp-rounded-polypuls3 pp-px-4 pp-py-2 pp-text-sm pp-font-medium pp-transition-colors;
    @apply focus-visible:pp-outline-none focus-visible:pp-ring-2 focus-visible:pp-ring-offset-2;
    @apply disabled:pp-pointer-events-none disabled:pp-opacity-50;
  }

  .polypuls3-button-primary {
    @apply pp-bg-primary pp-text-primary-foreground hover:pp-opacity-90;
  }

  .polypuls3-button-secondary {
    @apply pp-bg-secondary pp-text-secondary-foreground hover:pp-opacity-90;
  }

  .polypuls3-card {
    @apply pp-rounded-polypuls3 pp-border pp-border-border pp-bg-background pp-p-6 pp-shadow-sm;
  }

  .polypuls3-input {
    @apply pp-flex pp-h-10 pp-w-full pp-rounded-polypuls3 pp-border pp-border-border pp-bg-background pp-px-3 pp-py-2 pp-text-sm;
    @apply placeholder:pp-text-muted-foreground;
    @apply focus-visible:pp-outline-none focus-visible:pp-ring-2 focus-visible:pp-ring-primary;
    @apply disabled:pp-cursor-not-allowed disabled:pp-opacity-50;
  }

  .polypuls3-label {
    @apply pp-text-sm pp-font-medium pp-leading-none peer-disabled:pp-cursor-not-allowed peer-disabled:pp-opacity-70;
  }

  /* Theme: Minimal - Clean, flat design */
  .pp-theme-minimal .polypuls3-button-primary {
    @apply pp-bg-primary pp-text-primary-foreground;
    transition: background-color 0.2s, border-color 0.2s;
  }

  .pp-theme-minimal .polypuls3-button-primary:hover:not(:disabled) {
    @apply pp-border pp-border-primary;
    opacity: 0.9;
  }

  .pp-theme-minimal .polypuls3-card {
    box-shadow: var(--polypuls3-shadow-sm);
  }

  .pp-theme-minimal .pp-progress-bar {
    @apply pp-bg-primary;
    transition: width 0.3s ease;
  }

  .pp-theme-minimal .pp-vote-option {
    @apply pp-border pp-border-border pp-rounded-polypuls3 pp-transition-colors;
  }

  .pp-theme-minimal .pp-vote-option:hover {
    @apply pp-border-primary;
  }

  /* Theme: Premium - Gradients, shadows, animations */
  .pp-theme-premium .polypuls3-button-primary {
    background: linear-gradient(135deg, var(--polypuls3-primary) 0%, var(--polypuls3-primary-dark) 100%);
    @apply pp-text-primary-foreground;
    box-shadow: var(--polypuls3-shadow-md);
    transition: transform 0.2s, box-shadow 0.2s;
  }

  .pp-theme-premium .polypuls3-button-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--polypuls3-shadow-lg);
  }

  .pp-theme-premium .polypuls3-button-primary:active:not(:disabled) {
    transform: translateY(0);
    box-shadow: var(--polypuls3-shadow-md);
  }

  .pp-theme-premium .polypuls3-card {
    box-shadow: var(--polypuls3-shadow-md);
    transition: box-shadow 0.3s, transform 0.3s;
  }

  .pp-theme-premium .polypuls3-card:hover {
    box-shadow: var(--polypuls3-shadow-lg);
    transform: translateY(-2px);
  }

  .pp-theme-premium .pp-progress-bar {
    background: linear-gradient(90deg, var(--polypuls3-primary) 0%, var(--polypuls3-primary-light) 100%);
    position: relative;
    overflow: hidden;
    transition: width 0.5s ease;
  }

  .pp-theme-premium .pp-progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.3),
      transparent
    );
    animation: polypuls3-shimmer 2s infinite;
  }

  .pp-theme-premium .pp-progress-bar-leader {
    background: linear-gradient(90deg, var(--polypuls3-success) 0%, var(--polypuls3-success-light) 100%);
  }

  .pp-theme-premium .pp-vote-option {
    @apply pp-border-2 pp-rounded-polypuls3 pp-transition-all;
    border-color: transparent;
    background: linear-gradient(var(--polypuls3-background), var(--polypuls3-background)) padding-box,
                linear-gradient(135deg, var(--polypuls3-primary), var(--polypuls3-primary-light)) border-box;
  }

  .pp-theme-premium .pp-vote-option:hover {
    transform: scale(1.02);
    box-shadow: var(--polypuls3-shadow-md);
  }

  .pp-theme-premium .pp-vote-option-selected {
    background: linear-gradient(135deg, var(--polypuls3-primary) 0%, var(--polypuls3-primary-light) 100%);
    @apply pp-text-primary-foreground;
  }

  /* Utility classes */
  .pp-gradient-primary {
    background: linear-gradient(135deg, var(--polypuls3-primary) 0%, var(--polypuls3-primary-light) 100%);
  }

  .pp-gradient-success {
    background: linear-gradient(135deg, var(--polypuls3-success) 0%, var(--polypuls3-success-light) 100%);
  }

  .pp-animate-slide-in {
    animation: polypuls3-slide-in 0.3s ease-out;
  }

  .pp-animate-scale-in {
    animation: polypuls3-scale-in 0.2s ease-out;
  }

  .pp-animate-pulse {
    animation: polypuls3-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* ===========================
     Widget Size Variants
     =========================== */

  /* Small widget size */
  .pp-size-small .polypuls3-card {
    @apply pp-p-4;
  }

  .pp-size-small .pp-widget-title {
    @apply pp-text-lg pp-font-bold pp-mb-2;
  }

  .pp-size-small .pp-widget-heading {
    @apply pp-text-base pp-font-semibold pp-mb-2;
  }

  .pp-size-small .pp-widget-body {
    @apply pp-text-xs;
  }

  .pp-size-small .polypuls3-button {
    @apply pp-px-3 pp-py-1 pp-text-xs;
  }

  .pp-size-small .pp-status-badge {
    @apply pp-px-2 pp-py-0.5 pp-text-xs;
  }

  .pp-size-small .pp-vote-option {
    @apply pp-p-3 pp-text-xs;
  }

  .pp-size-small .pp-vote-option-text {
    @apply pp-text-xs;
  }

  .pp-size-small .pp-widget-spacing {
    @apply pp-space-y-1.5;
  }

  /* Medium widget size (default) */
  .pp-size-medium .polypuls3-card {
    @apply pp-p-6;
  }

  .pp-size-medium .pp-widget-title {
    @apply pp-text-2xl pp-font-bold pp-mb-3;
  }

  .pp-size-medium .pp-widget-heading {
    @apply pp-text-lg pp-font-semibold pp-mb-3;
  }

  .pp-size-medium .pp-widget-body {
    @apply pp-text-sm;
  }

  .pp-size-medium .polypuls3-button {
    @apply pp-px-4 pp-py-2 pp-text-sm;
  }

  .pp-size-medium .pp-status-badge {
    @apply pp-px-3 pp-py-1 pp-text-xs;
  }

  .pp-size-medium .pp-vote-option {
    @apply pp-p-4 pp-text-sm;
  }

  .pp-size-medium .pp-vote-option-text {
    @apply pp-text-sm;
  }

  .pp-size-medium .pp-widget-spacing {
    @apply pp-space-y-2;
  }

  /* Large widget size */
  .pp-size-large .polypuls3-card {
    @apply pp-p-8;
  }

  .pp-size-large .pp-widget-title {
    @apply pp-text-3xl pp-font-bold pp-mb-4;
  }

  .pp-size-large .pp-widget-heading {
    @apply pp-text-xl pp-font-semibold pp-mb-4;
  }

  .pp-size-large .pp-widget-body {
    @apply pp-text-base;
  }

  .pp-size-large .polypuls3-button {
    @apply pp-px-5 pp-py-3 pp-text-base;
  }

  .pp-size-large .pp-status-badge {
    @apply pp-px-4 pp-py-1.5 pp-text-sm;
  }

  .pp-size-large .pp-vote-option {
    @apply pp-p-5 pp-text-base;
  }

  .pp-size-large .pp-vote-option-text {
    @apply pp-text-base;
  }

  .pp-size-large .pp-widget-spacing {
    @apply pp-space-y-3;
  }

  /* ===========================
     Success Banner
     =========================== */

  .pp-success-banner {
    @apply pp-border pp-text-success;
    @apply pp-rounded-polypuls3 pp-p-3 pp-mb-4;
    @apply pp-flex pp-items-center pp-gap-2;
    background-color: rgba(34, 197, 94, 0.1);
    border-color: rgba(34, 197, 94, 0.3);
  }

  .pp-success-icon {
    @apply pp-w-5 pp-h-5 pp-flex-shrink-0;
  }

  /* Size-aware variants */
  .pp-size-small .pp-success-banner {
    @apply pp-p-2;
  }

  .pp-size-small .pp-success-icon {
    @apply pp-w-4 pp-h-4;
  }

  .pp-size-large .pp-success-banner {
    @apply pp-p-4;
  }

  .pp-size-large .pp-success-icon {
    @apply pp-w-6 pp-h-6;
  }
}
